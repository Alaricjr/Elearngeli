<div class="container" *ngIf="course">
  <div class="lecture" *ngFor="let lecture of course.lectures">
    <h2>{{lecture.name}}
      <button class="open-toggle" md-icon-button (click)="openToggleLecture(lecture)">
        <md-icon>arrow_drop_down</md-icon>
      </button>
    </h2>

    <div class="lecture-content" *ngIf="lecture == openedLecture">
      <div class="units">
        <div class="unit" *ngFor="let unit of lecture.units;">
          <div class="unit-content">
            <span class="unit-type">{{ unit.type }}</span>
            <span class="unit-actions">
              <button md-icon-button md-tooltip="Edit" (click)="onEditUnit(unit)">
                <md-icon>edit</md-icon>
              </button>
              <button md-icon-button md-tooltip="Delete" (click)="deleteUnit(lecture)">
                <md-icon>delete</md-icon>
              </button>
            </span>
          </div>

          <app-unit-form *ngIf="unitEditMode && unitEditElement===unit"
                         [course]="course"
                         [lecture]="lecture"
                         [type]="unit.type"
                         (onDone)="onEditUnitDone()">
          </app-unit-form>
        </div>

        <app-unit-form *ngIf="unitCreateMode && unitCreateType"
                       [course]="course"
                       [lecture]="lecture"
                       [type]="unitCreateType"
                       (onDone)="onAddUnitDone()">
        </app-unit-form>
      </div>

      <app-lecture-form [model]="lecture" *ngIf="lectureEditMode" (onSubmit)="updateLecture($event)"
                        actionLabel="Update"></app-lecture-form>

      <div class="lecture-actions">
        <button md-icon-button md-tooltip="Edit" (click)="onEditLecture()">
          <md-icon>edit</md-icon>
        </button>
        <button md-icon-button md-tooltip="Duplicate" (click)="duplicateLecture(lecture)">
          <md-icon>content_copy</md-icon>
        </button>
        <button md-icon-button md-tooltip="Delete" (click)="deleteLecture(lecture)">
          <md-icon>delete</md-icon>
        </button>
      </div>
    </div>
  </div>

  <app-lecture-form *ngIf="lectureCreateMode" (onSubmit)="createLecture($event)" actionLabel="Add"></app-lecture-form>

  <app-md-fab-menu class="fab" *ngIf="!unitCreateMode && !unitEditMode && !lectureCreateMode && ! lectureEditMode" fabTooltip="Add content">
    <div (click)="onAddUnit('task')">Add tasks</div>
    <div (click)="onAddUnit('video')">Upload videos</div>
    <div (click)="onAddLecture()">Add lecture</div>
  </app-md-fab-menu>
</div>
